<template>
  <div>
    <footer class="footer mt-5">
      <div
        class="mb-2 cta cta-horizontal cta-horizontal-box bg-dark bg-image cta-footer-boxed"
        :style="{
          backgroundImage:
            'url(/assets/images/sheffield_stainless_steel_background.jpg)',
        }"
      >
        <div class="container-fluid">
          <div class="row mt-3">
            <div class="col-xl-12 justify-content-center footer-banner mb-1">
              <template>
                <h1 class="cta-title cta-title-footer text-base text-primary">
                  SHEFFIELD STEEL SYSTEMS LIMITED
                </h1>
              </template>
            </div>

            <div class="col-xl-3 footer-contacts-col mt-2">
              <div class="footer-contacts">
                <h2 class="footer-banner-header">Nairobi</h2>

                <ul class="mt-1 mb-2">
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_location.png"
                      alt="Icon 1"
                    />
                    Off Old Mombasa Road before the Nairobi Standard Gauge
                    Railway Station
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_postbox.png"
                      alt="Icon 1"
                    />

                    P. O. Box 29 â€“ 00606, Nairobi Kenya
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_phone.png"
                      alt="Icon 1"
                    />
                    <div><a href="tel:+254713777111">+254 713 777 111 </a></div>
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_phone.png"
                      alt="Icon 1"
                    />

                    <div><a href="tel:+254713444000">+254 713 444 000</a></div>
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_email.png"
                      alt="Icon 1"
                    />
                    <a href="mailto:info@sheffieldafrica.com">
                      info@sheffieldafrica.com</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="col-xl-3 footer-contacts-col mt-2">
              <div class="footer-contacts">
                <h2 class="footer-banner-header">Mombasa</h2>

                <ul class="mt-1 mb-2">
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_location.png"
                      alt="Icon 1"
                    />
                    Petrocity Complex 1st Floor-Off Links Road, Nyali, Mombasa
                  </li>

                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_phone.png"
                      alt="Icon 1"
                    />
                    <div><a href="tel:+254713777111">+254 713 777 111 </a></div>
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_phone.png"
                      alt="Icon 1"
                    />

                    <div><a href="tel:+254716518450">+254 716 518 450 </a></div>
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_email.png"
                      alt="Icon 1"
                    />
                    <a href="mailto:info@sheffieldafrica.com">
                      info@sheffieldafrica.com</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="col-xl-3 footer-contacts-col mt-2">
              <div class="footer-contacts">
                <h2 class="footer-banner-header">Kampala</h2>

                <ul class="mt-1 mb-2">
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_location.png"
                      alt="Icon 1"
                    />
                    Bugalobi Hardware City Opposite Uganda Baati, Block 3 Room
                    102, Mulwana Road.
                  </li>

                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_phone.png"
                      alt="Icon 1"
                    />
                    <a style="width: 100%" href="tel:+256741177711"
                      >+256 741 177 711
                    </a>
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_phone.png"
                      alt="Icon 1"
                    />
                    <a href="tel:+256741177713">+256 741 177 713</a>
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_email.png"
                      alt="Icon 1"
                    />
                    <a href="mailto:sales@sheffieldafrica.com">
                      sales@sheffieldafrica.com</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="col-xl-3 footer-contacts-col mt-2">
              <div class="footer-contacts">
                <h2 class="footer-banner-header">Kigali</h2>

                <ul class="mt-1 mb-2">
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_phone.png"
                      alt="Icon 1"
                    />
                    <a href="tel:+250790001231">+250 790 001 231 </a>
                  </li>
                  <li class="my-footer-li">
                    <img
                      src="/assets/images/footer-icons/footer_email.png"
                      alt="Icon 1"
                    />
                    <a href="mailto:sales1rwanda@sheffieldafrica.com">
                      sales1rwanda@sheffieldafrica.com</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div
              class="col-xl-12 justify-content-center footer-banner mt-4 mb-4"
              style="gap: 10px; padding: 10px !important"
            >
              <NuxtLink
                to="/about-us"
                class="btn btn-secondary"
                style="border: solid 2px; min-width: fit-content"
              >
                <span><b>About Us</b></span
                ><i class="icon-long-arrow-right"></i>
              </NuxtLink>

              <NuxtLink
                to="/contact-us"
                class="btn btn-secondary"
                style="border: solid 2px; min-width: fit-content"
              >
                <span><b>Contact Us</b></span
                ><i class="icon-long-arrow-right"></i>
              </NuxtLink>
            </div>
          </div>
          <!-- End .row -->
        </div>
        <!-- End .container-fluid -->
      </div>

      <!-- End .cta -->
      <div class="footer-middle border-0">
        <div class="container-fluid footer-middle-content">
          <div class="row">
            <div class="col-sm-4 col-lg-3">
              <div class="widget widget-about">
                <h4 class="widget-title footer-title">Let's Get Social</h4>

                <div class="social-icons">
                  <a
                    href="https://www.facebook.com/SheffieldAfricaFacilitySolutions"
                    style="border: 0.1rem solid #c02434"
                    class="social-icon mt-1"
                    target="_blank"
                    title="Facebook"
                  >
                    <img
                      src="/assets/images/social-icons/facebook.png"
                      alt="Facebook Logo"
                    />
                  </a>
                  <a
                    href="https://www.instagram.com/sheffieldafrica/"
                    style="border: 0.1rem solid #c02434"
                    class="social-icon mt-1"
                    target="_blank"
                    title="Instagram"
                  >
                    <img
                      src="/assets/images/social-icons/instagram.png"
                      alt="Instagram Logo"
                    />
                  </a>
                  <a
                    href="https://www.threads.net/@sheffieldafrica"
                    style="border: 0.1rem solid #c02434"
                    class="social-icon mt-1"
                    target="_blank"
                    title="Threads"
                  >
                    <img
                      src="/assets/images/social-icons/threads.png"
                      alt="Threads Logo"
                    />
                  </a>
                  <a
                    href="https://wa.me/+254114838130?text=Hello%20Sheffield, I need assistance in "
                    style="border: 0.1rem solid #c02434"
                    class="social-icon mt-1"
                    target="_blank"
                    title="WhatsApp"
                  >
                    <img
                      src="/assets/images/social-icons/whatsapp.png"
                      alt="WhatsApp Logo"
                    />
                  </a>
                  <a
                    href="https://twitter.com/sheffield_afric/"
                    style="border: 0.1rem solid #c02434"
                    class="social-icon mt-1"
                    target="_blank"
                    title="X"
                  >
                    <img src="/assets/images/social-icons/x.png" alt="X Logo" />
                  </a>
                  <a
                    href="https://www.linkedin.com/company/sheffield-steel-systems-ltd/mycompany"
                    style="border: 0.1rem solid #c02434"
                    class="social-icon mt-1"
                    target="_blank"
                    title="Linkedin"
                  >
                    <img
                      src="/assets/images/social-icons/linkedin.png"
                      alt="Linkedin Logo"
                    />
                  </a>
                  <a
                    href="https://www.youtube.com/channel/UCK-oWPdQazenIHndl4zABew"
                    style="border: 0.1rem solid #c02434"
                    class="social-icon mt-1"
                    target="_blank"
                    title="Youtube"
                  >
                    <img
                      src="/assets/images/social-icons/youtube.png"
                      alt="Youtube Logo"
                    />
                  </a>
                  <a
                    href="http://tiktok.com/@sheffieldafrica"
                    style="border: 0.1rem solid #c02434"
                    class="social-icon mt-1"
                    target="_blank"
                    title="TikTok"
                  >
                    <img
                      src="/assets/images/social-icons/tiktok.png"
                      alt="TikTok Logo"
                    />
                  </a>
                </div>
                <!-- End .soial-icons -->
              </div>

              <!-- End .widget about-widget -->
            </div>
            <!-- End .col-sm-12 col-lg-4 -->

            <div class="col-sm-4 col-lg-3">
              <div class="widget">
                <h4 class="widget-title footer-title">Information</h4>
                <!-- End .widget-title -->

                <ul class="widget-list">
                  <li class="ec-footer-link">
                    <NuxtLink to="/about-us"> About us </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/about-us/sheffield-advantage">
                      Sheffield Advantages
                    </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/projects"> Project References </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/events"> Events </NuxtLink>
                  </li>
                  <li class="ec-footer-link">
                    <NuxtLink to="/careers"> Careers </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/faq"> FAQ </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/media"> Media Center </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/contact-us"> Contact us </NuxtLink>
                  </li>
                </ul>
                <!-- End .widget-list -->
              </div>
              <!-- End .widget -->
            </div>

            <div class="col-sm-4 col-lg-3">
              <div class="widget">
                <h4 class="widget-title footer-title">Legal</h4>
                <!-- End .widget-title -->

                <ul class="widget-list">
                  <li class="ec-footer-link">
                    <NuxtLink to="/privacy-policy"> Privacy Policy </NuxtLink>
                  </li>
                  <li class="ec-footer-link">
                    <NuxtLink to="/cookie-policy"> Cookie Policy </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/terms-and-conditions">
                      Terms & Conditions
                    </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/warranty-terms"> Warranty Terms </NuxtLink>
                  </li>

                  <li class="ec-footer-link">
                    <NuxtLink to="/lease-and-finance">
                      Lease & Finance
                    </NuxtLink>
                  </li>
                </ul>
                <!-- End .widget-list -->
              </div>
              <!-- End .widget -->
            </div>
            <!-- End .col-sm-4 col-lg-2 -->

            <div class="col-sm-4 col-lg-3">
              <div class="widget widget-newsletter">
                <h4 class="widget-title footer-title">
                  Sign Up to Our Newsletter
                </h4>
                <!-- End .widget-title -->

                <p>
                  Get instant updates about our new products and special promos!
                </p>

                <form action="#">
                  <div class="input-group">
                    <input
                      type="email"
                      class="form-control"
                      placeholder="Enter your Email Address"
                      aria-label="Email Adress"
                      required
                    />
                    <div class="input-group-append">
                      <button class="btn btn-dark" type="submit">
                        <i class="icon-long-arrow-right"></i>
                      </button>
                    </div>
                    <!-- .End .input-group-append -->
                  </div>
                  <!-- .End .input-group -->
                </form>
              </div>
              <!-- End .widget -->
            </div>
            <!-- End .col-sm-4 col-lg-2 -->
          </div>
          <!-- End .row -->
        </div>
        <!-- End .container-fluid -->
      </div>
      <!-- End .footer-middle -->

      <div class="footer-bottom">
        <div class="container-fluid justify-content-center">
          <p class="footer-copyright">
            Copyright Â© {{ new Date().getFullYear() }} <b>Sheffield Africa</b>.
            All Rights Reserved.
          </p>
          <!-- End .footer-copyright -->
        </div>
        <!-- End .container-fluid -->
      </div>
      <!-- End .footer-bottom -->
    </footer>
    <!-- End .footer -->
  </div>

  <div v-if="showPopup" class="cookie-policy-popup">
    <div class="cookie-policy-content">
      <h2>Cookie Policy</h2>
      <p>
        This website uses cookies to ensure you get the best experience on our
        website. By using our site, you acknowledge that you have read and
        understand our
        <NuxtLink to="/privacy-policy"> Privacy Policy </NuxtLink> and
        <NuxtLink to="/cookie-policy"> Cookie Policy </NuxtLink>.
      </p>

      <p>
        By clicking "Accept Cookies," you consent to the use of cookies on this
        website.
      </p>
      <button class="btn btn-secondary mr-3" @click="acceptCookies">
        Accept <i class="icon-check"></i>
      </button>
      <button class="btn btn-primary ml-3" @click="rejectCookies">
        Reject <i class="icon-close"></i>
      </button>
    </div>
  </div>

  <div class="whatsapp-logo">
    <a
      href="https://api.whatsapp.com/send/?phone=%2B254114838130&text=Hello+Sheffield%2C+I+need+assistance+in"
      target="_blank"
    >
      <i class="icon-whatsapp"></i>
    </a>
  </div>
</template>

<script setup>
import { ref, onMounted } from "vue";

const showPopup = ref(false);
const showAd = ref(false);

const acceptCookies = () => {
  // Set a cookie to track user's choice to accept cookies
  const expirationDate = new Date();
  expirationDate.setDate(expirationDate.getDate() + 365); // Set expiration to 365 days from now
  document.cookie = `cookiePolicyAccepted=true; expires=${expirationDate.toUTCString()}; path=/`;
  showPopup.value = false;
};

const rejectCookies = () => {
  // Set a cookie to track user's choice to reject cookies for one week
  const expirationDate = new Date();
  expirationDate.setDate(expirationDate.getDate() + 7); // Set expiration to 7 days from now
  document.cookie = `cookiePolicyRejected=true; expires=${expirationDate.toUTCString()}; path=/`;
  showPopup.value = false;
};

const isCookieExpired = (cookie) => {
  const cookieData = cookie.split(";");
  const expiresString = cookieData.find((item) =>
    item.trim().startsWith("expires=")
  );
  if (expiresString) {
    const expiresDate = new Date(expiresString.split("=")[1].trim());
    return expiresDate < new Date();
  }
  return false;
};

const setCookie = (name, value, minutes) => {
  const date = new Date();
  date.setTime(date.getTime() + minutes * 60 * 1000);
  document.cookie = `${name}=${value};expires=${date.toUTCString()};path=/`;
};

const getCookie = (name) => {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(";").shift();
};

const closeAd = () => {
  document.querySelector(".ad-policy-popup").style.display = "none";
  setCookie("adClosed", "true", 30); // Set cookie for 30 minutes
  showAd.value = false;
};

onMounted(() => {
  // Check if the cookie policy has been accepted or rejected before showing the pop-up
  const cookiePolicyAccepted = document.cookie.includes(
    "cookiePolicyAccepted=true"
  );
  const cookiePolicyRejected = document.cookie.includes(
    "cookiePolicyRejected=true"
  );

  if (
    !cookiePolicyAccepted &&
    (!cookiePolicyRejected || isCookieExpired(document.cookie))
  ) {
    showPopup.value = true;
  }

  if (getCookie("adClosed")) {
    showAd.value = false;
  } else {
    showAd.value = true;
  }
});
</script>

<style scoped>
.cookie-policy-popup {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: #fff;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.43);
  padding: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

/* Basic styling for the popup */
.ad-policy-popup {
  position: fixed;
  /* Ensures the popup stays in the same place when scrolling */
  top: 42%;
  /* Positions the popup in the center vertically */
  left: 50%;
  /* Positions the popup in the center horizontally */
  transform: translate(-50%, -50%);
  /* Offsets the popup to perfectly center it */
  width: 720px;
  /* Set the width of the popup */
  height: 480px;
  /* Set the height of the popup */
  background-color: white;
  /* Set a background color for the popup */
  box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
  /* Adds a subtle shadow around the popup */
  z-index: 1000;
  /* Ensures the popup appears above other content */
  padding: 10px;
  /* Adds padding inside the popup */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  /* Adds rounded corners to the popup */
}

/* Styling for the image inside the popup */
.ad-policy-popup img {
  max-width: 100%;
  /* Ensures the image is fully visible */
  max-height: 480px;
  /* Ensures the image is fully visible */
  object-fit: contain;
  /* Scales the image appropriately without cropping */
  border-radius: 8px;
}

/* Styling for the button */
.ad-policy-popup button {
  margin-top: 20px;
  /* Adds space above the button */
  padding: 10px 20px;
  /* Adds padding inside the button */
  background-color: #c02434;
  /* Sets the button color */
  color: white;
  /* Sets the text color */
  border: 1px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
}

.ad-policy-popup button:hover {
  background-color: #0056b3;
}

.cookie-policy-content {
  text-align: center;
}

.cookie-policy-content h2 {
  font-size: 20px;
  margin-bottom: 10px;
}

.cookie-policy-content p {
  font-size: 14px;
}

.cookie-policy-content button {
  color: #fff;
  border: none;
  margin-top: 20px;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 16px;
}

.cookie-policy-content button:hover {
  background-color: #0056b3;
}

.social-icon {
  width: 5rem;
  height: 5rem;
}

.whatsapp-chat {
  position: fixed;
  bottom: 10px;
  right: 20px;
  z-index: 1000;
  /* Adjust as needed to ensure it appears above other elements */
}

.whatsapp-chat img {
  width: 80px;
  /* Adjust the size as needed */
  height: 80px;
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  cursor: pointer;
}

.cta-title-footer {
  background-color: #c02434 !important;
  color: #ffffff !important;
  padding: 10px;
  margin-bottom: 15px;
}

.my-footer-li i {
  font-size: 22px;
  margin-right: 15px;
  color: #c02434;
}

.my-footer-li {
  line-height: 25px;
  font-weight: 500;
  color: #000;
}

.my-footer-li a {
  word-break: break-all;
}

.cta-horizontal-box {
  padding-top: 1.8rem;
  padding-bottom: 1.6rem;
}

.whatsapp-logo {
  position: fixed;
  bottom: 10px;
  right: 20px;
  z-index: 999;
}

.whatsapp-logo a {
  display: block;
  width: 80px;
  height: 80px;
  background-color: #25d366;
  border-radius: 50%;
  text-align: center;
  line-height: 60px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  text-decoration: none;
}

.whatsapp-logo img {
  width: 50%;
  height: auto;
}

.whatsapp-logo a:hover {
  background-color: #128c7e;
}

.whatsapp-logo i {
  margin-top: 8px;
}

@media only screen and (max-width: 768px) {
  .cta-title-footer {
    padding: 2px;
  }

  .cta-title {
    font-size: 1.6rem;
  }

  .my-footer-li {
    font-size: 12px;
  }
}

.wave {
  position: absolute;
  top: -80px;
  left: 0;
  width: 100%;
  height: 80px;
  background: url("/assets/images/wave.png");
  background-size: 1000px 100px;
}

.wave#wave1 {
  z-index: 1000;
  opacity: 1;
  bottom: 0;
  animation: animateWaves 4s linear infinite;
}

.wave#wave2 {
  z-index: 999;
  opacity: 0.5;
  bottom: 10px;
  animation: animate 4s linear infinite !important;
}

.wave#wave3 {
  z-index: 1000;
  opacity: 0.2;
  bottom: 15px;
  animation: animateWaves 3s linear infinite;
}

.wave#wave4 {
  z-index: 999;
  opacity: 0.7;
  bottom: 20px;
  animation: animate 3s linear infinite;
}

@keyframes animateWaves {
  0% {
  }

  100% {
  }
}

@keyframes animate {
  0% {
  }

  100% {
  }
}

.footer-middle a {
  color: #f1eeee;
  font-weight: 450;
}

.footer-middle p {
  color: #f1eeee;
  font-weight: 450;
}

.footer-bottom p {
  color: #ffffff;
  font-weight: 450;
}

.footer-title {
  font-size: 1.95rem;
  line-height: 2.75rem;
  color: #fff;
  border-left: 5px solid #c02434;
  padding-left: 1.5rem;
  height: fit-content;
}

.widget-list {
  margin-left: 22px;
}

.cta-footer-boxed {
  width: 94%;
  margin-left: 3%;
  background-color: #fff;
  border-radius: 35px;
  box-shadow: 0px -5px 10px rgba(0, 0, 0, 0.5);
}

.footer-middle-content {
  width: 94%;
}

input::placeholder {
  color: #000;
}

.social-icon img {
  filter: invert(22%) sepia(49%) saturate(4151%) hue-rotate(338deg)
    brightness(82%) contrast(93%);
}

.social-icon:hover {
  background-color: #c02434 !important;
}

.social-icon:hover img {
  filter: invert(99%) sepia(0%) saturate(2%) hue-rotate(132deg) brightness(111%)
    contrast(101%);
}

.footer-banner {
  display: flex;
}

.footer-contacts {
  padding: 20px;
  border-radius: 10px;
  background-color: #ffffff;
  padding: 20px;
  border-radius: 10px;
  height: 100%;
  box-shadow: 0px -6px 11px #686868;
}

.footer-contacts li {
  color: #777;
}

.footer-contacts li {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  line-height: 20px;
  font-size: 1.35rem;
}

.footer-contacts img {
  margin-right: 10px;
  width: 20px;
  height: 20px;
  filter: invert(20%) sepia(63%) saturate(3227%) hue-rotate(337deg)
    brightness(88%) contrast(94%);
}

.footer-contacts img::after {
  background-color: #fff;
  border-radius: 50%;
}

.footer-banner-header {
  position: relative;
  display: inline-block;
  color: #c02434;
  font-size: 2.5rem;
  font-weight: 550;
}

.footer-banner-header:after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 100%;
  margin-top: 5px;
  margin-left: 2px;
  width: 70%;
  height: 2px;
  background: #c02434;
}
</style>
